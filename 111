<html><head><style type="text/css">.canvas{margin:0 auto;}</style></head><body><center><canvas class="canvas" width=500 height=500></canvas><button onclick="clc()">clear</button></center></body><script>  var canvas=document.getElementsByTagName("canvas")[0];var width=canvas.width;var height=canvas.height;var flag=false;var lasts=0;var cur=0;var lastpoint=0;var time=0;var context=canvas.getContext("2d");f();function f(){context.save();context.beginPath();context.moveTo(0,0);context.strokeStyle="red";context.lineWidth=6;context.lineTo(0,height);context.lineTo(width,height);context.lineTo(width,0);context.closePath();context.stroke();context.beginPath();context.strokeStyle="red";context.lineWidth=1;context.moveTo(0,0);context.lineTo(width,height);context.moveTo(0,height);context.lineTo(width,0);context.moveTo(width/2,0);context.lineTo(width/2,height);context.moveTo(0,height/2);context.lineTo(width,height/2);context.stroke();context.restore();}canvas.onmousedown=function(e){ e.preventDefault();flag=true;lasts=cur;time=new Date().getTime();lastpoint=windowTocanvas(e.clientX,e.clientY);}canvas.onmouseup=function(e){ e.preventDefault();flag=false;}canvas.onmouseout=function(e){ e.preventDefault();flag=false;}canvas.onmousemove=function(e){ e.preventDefault();if(flag){var c=windowTocanvas(e.clientX,e.clientY);var linewidth=Math.round(speed()*2/3)+Math.round(lasts*1/3);context.beginPath();context.lineWidth=linewidth;context.strokeStyle="black";context.lineCap="round";context.moveTo(lastpoint.a,lastpoint.b);context.lineTo(c.a,c.b);context.stroke();cur=Math.sqrt((c.a-lastpoint.a)*(c.a-lastpoint.a)+(c.b-lastpoint.b)*(c.b-lastpoint.b));lastpoint=c;}}function windowTocanvas(x,y){var c=canvas.getBoundingClientRect();return {"a":x-c.left,"b":y-c.top};}function clc(){context.clearRect(0,0,canvas.width,canvas.height);f();}function speed(){var now=new Date().getTime();var s=cur/(now-time);time=now;lasts=s;if(s<0.1)return 30;if(s>5)return 5;else return -5.1*s+30.5;}</script></html>
